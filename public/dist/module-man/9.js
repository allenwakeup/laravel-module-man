(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{rp7n:function(r,e,t){"use strict";t.r(e);t("pNMO"),t("4Brf"),t("07d7"),t("0oug"),t("4mDm"),t("PKPk"),t("3bBZ"),t("pjDv"),t("+2oP"),t("sMBO");function o(r){return function(r){if(Array.isArray(r))return a(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"==typeof r)return a(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(r);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(r,e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=r[t];return o}var s={components:{},props:{},data:function(){return{form:{code:"",name:"",short:"",alias:"",display:"",description:""},rules:{workshop_id:[{required:!0,trigger:"change",message:"请选择一个车间"}],code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:2,max:20,message:"至少两个字，最多20个字",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:20,message:"至少两个字，最多20个字",trigger:"blur"}]},workshops:[],workshops_cascader:{base:"factory",factory:"workshop"},id:0}},watch:{},computed:{},methods:{handleSubmit:function(){var r=this;this.$refs.form.validate((function(e){if(!e)return r.$message.error("请按要求填写表单！"),!1;var t=r.$apiHandle(r.$api.adminProcesses,r.id);t.status?r.$put(t.url,r.form).then((function(e){return 200===e.code?(r.$message.success(e.msg),r.$router.back()):r.$message.error(e.msg)})):r.$post(t.url,r.form).then((function(e){return 200===e.code||201===e.code?(r.$message.success(e.msg),r.$router.back()):r.$message.error(e.msg)}))}))},onChangeFactory:function(r){this.form.factory_id=row[1]},loadWorkshop:function(r){var e=this,t=r[r.length-1],a={data_type:"cascader",cascader:this.workshops_cascader[t.cascader]};a[t.cascader+"_id"]=t.value,t.loading=!0,this.$get(this.$api.adminWorkshops,a).then((function(r){t.loading=!1,t.children=r.data,e.workshops=o(e.workshops)}))},getForm:function(){var r=this;this.$get(this.$api.adminProcesses+"/"+this.id).then((function(e){r.form=e.data}))},onload:function(){this.$isEmpty(this.$route.params.id)||(this.id=this.$route.params.id,this.getForm())}},created:function(){this.onload()},mounted:function(){}},n=t("KHd+"),i=Object(n.a)(s,(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[t("div",{staticClass:"admin_table_page_title"},[t("a-button",{staticClass:"float_right",attrs:{icon:"arrow-left"},on:{click:function(e){return r.$router.back()}}},[r._v("返回")]),r._v("\n        工序编辑\n    ")],1),r._v(" "),t("div",{staticClass:"unline underm"}),r._v(" "),t("div",{staticClass:"admin_form"},[t("a-form-model",{ref:"form",attrs:{model:r.form,rules:r.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-model-item",{attrs:{label:"车间",prop:"workshop_id"}},[t("a-cascader",{attrs:{"load-data":r.loadWorkshop,options:r.workshops,placeholder:"请选择车间","change-on-select":""},on:{change:r.onChangeWorkshop}})],1),r._v(" "),t("a-form-model-item",{attrs:{label:"编码",prop:"name"}},[t("a-input",{model:{value:r.form.code,callback:function(e){r.$set(r.form,"code",e)},expression:"form.code"}})],1),r._v(" "),t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-input",{model:{value:r.form.name,callback:function(e){r.$set(r.form,"name",e)},expression:"form.name"}})],1),r._v(" "),t("a-form-model-item",{attrs:{label:"简称"}},[t("a-input",{model:{value:r.form.short,callback:function(e){r.$set(r.form,"short",e)},expression:"form.short"}})],1),r._v(" "),t("a-form-model-item",{attrs:{label:"别名"}},[t("a-input",{model:{value:r.form.alias,callback:function(e){r.$set(r.form,"alias",e)},expression:"form.alias"}})],1),r._v(" "),t("a-form-model-item",{attrs:{label:"显示名称"}},[t("a-input",{model:{value:r.form.display,callback:function(e){r.$set(r.form,"display",e)},expression:"form.display"}})],1),r._v(" "),t("a-form-model-item",{attrs:{label:"描述"}},[t("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:r.form.description,callback:function(e){r.$set(r.form,"description",e)},expression:"form.description"}})],1),r._v(" "),t("a-form-model-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[t("a-button",{attrs:{type:"primary"},on:{click:r.handleSubmit}},[r._v("提交")])],1)],1)],1)])}),[],!1,null,"b941d99c",null);e.default=i.exports}}]);